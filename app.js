// Config
const CONFIG = {
    releasesUrl: './releases.json'
};

// 카테고리 아이콘 (순서: DBMS -> WEB/WAS -> PC -> OS)
const CATEGORY_ICONS = {
    'DBMS': {
        cssClass: 'dbms',
        icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5V19A9 3 0 0 0 21 19V5"/><path d="M3 12A9 3 0 0 0 21 12"/></svg>'
    },
    'WEB/WAS': {
        cssClass: 'web',
        icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>'
    },
    'PC': {
        cssClass: 'pc',
        icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="12" x="3" y="4" rx="2" ry="2"/><line x1="2" x2="22" y1="20" y2="20"/></svg>'
    },
    'OS': {
        cssClass: 'os',
        icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="3" rx="2"/><line x1="8" x2="16" y1="21" y2="21"/><line x1="12" x2="12" y1="17" y2="21"/></svg>'
    }
};

// Simple Icons SVG paths
const BRAND_ICONS = {
    mysql: '<svg viewBox="0 0 24 24"><path d="M16.405 5.501c-.115 0-.193.014-.274.033v.013h.014c.054.104.146.18.214.273.054.107.1.214.154.32l.014-.015c.094-.066.14-.172.14-.333-.04-.047-.046-.094-.08-.14-.04-.067-.126-.1-.18-.153zM5.77 18.695h-.927a50.854 50.854 0 00-.27-4.41h-.008l-1.41 4.41H2.45l-1.4-4.41h-.01a72.892 72.892 0 00-.195 4.41H0c.055-1.966.192-3.81.41-5.53h1.15l1.335 4.064h.008l1.347-4.063h1.095c.242 2.015.384 3.86.428 5.53zm4.017-4.08c-.378 2.045-.876 3.533-1.492 4.46-.482.716-1.01 1.073-1.583 1.073-.153 0-.34-.046-.566-.138v-.494c.11.017.24.026.386.026.268 0 .483-.075.647-.222.197-.18.295-.382.295-.605 0-.155-.077-.47-.23-.944L6.23 14.615h.91l.727 2.36c.164.536.233.91.205 1.123.4-1.064.678-2.227.835-3.483zm12.325 4.08h-2.63v-5.53h.885v4.85h1.745zm-3.32.135l-1.016-.5c.09-.076.177-.158.255-.25.433-.506.648-1.258.648-2.253 0-1.83-.718-2.746-2.155-2.746-.704 0-1.254.232-1.65.697-.43.508-.646 1.256-.646 2.245 0 .972.19 1.686.574 2.14.35.41.877.615 1.583.615.264 0 .506-.033.725-.098l1.325.772.36-.623zM15.5 17.588c-.225-.36-.337-.94-.337-1.736 0-1.393.424-2.09 1.27-2.09.443 0 .77.167.977.5.224.362.336.936.336 1.723 0 1.404-.424 2.108-1.27 2.108-.445 0-.77-.167-.978-.5zm-1.658-.425c0 .47-.172.856-.516 1.156-.344.3-.803.45-1.384.45-.543 0-1.064-.172-1.573-.515l.237-.476c.438.22.833.328 1.19.328.332 0 .593-.073.783-.22a.754.754 0 00.3-.615c0-.33-.23-.61-.648-.845-.388-.213-1.163-.657-1.163-.657-.422-.307-.632-.636-.632-1.177 0-.45.157-.81.47-1.085.315-.278.72-.415 1.22-.415.512 0 .98.136 1.4.41l-.213.476a2.726 2.726 0 00-1.064-.23c-.283 0-.502.068-.654.206a.685.685 0 00-.248.524c0 .328.234.61.666.85.393.215 1.187.67 1.187.67.433.305.648.63.648 1.168zm9.382-5.852c-.535-.014-.95.04-1.297.188-.1.04-.26.04-.274.167.055.053.063.14.11.214.08.134.218.313.346.407.14.11.28.216.427.31.26.16.555.255.81.416.145.094.293.213.44.313.073.05.12.14.214.172v-.02c-.046-.06-.06-.147-.105-.214-.067-.067-.134-.127-.2-.193a3.223 3.223 0 00-.695-.675c-.214-.146-.682-.35-.77-.595l-.013-.014c.146-.013.32-.066.46-.106.227-.06.435-.047.67-.106.106-.027.213-.06.32-.094v-.06c-.12-.12-.21-.283-.334-.395a8.867 8.867 0 00-1.104-.823c-.21-.134-.476-.22-.697-.334-.08-.04-.214-.06-.26-.127-.12-.146-.19-.34-.275-.514a17.69 17.69 0 01-.547-1.163c-.12-.262-.193-.523-.34-.763-.69-1.137-1.437-1.826-2.586-2.5-.247-.14-.543-.2-.856-.274-.167-.008-.334-.02-.5-.027-.11-.047-.216-.174-.31-.235-.38-.24-1.364-.76-1.644-.072-.18.434.267.862.422 1.082.115.153.26.328.34.5.047.116.06.235.107.356.106.294.207.622.347.897.073.14.153.287.247.413.054.073.146.107.167.227-.094.136-.1.334-.154.5-.24.757-.146 1.693.194 2.25.107.166.362.534.703.393.3-.12.234-.5.32-.835.02-.08.007-.133.048-.187v.015c.094.188.188.367.274.555.206.328.566.668.867.895.16.12.287.328.487.402v-.02h-.015c-.043-.058-.1-.086-.154-.133a3.445 3.445 0 01-.35-.4 8.76 8.76 0 01-.747-1.218c-.11-.21-.202-.436-.29-.643-.04-.08-.04-.2-.107-.24-.1.146-.247.273-.32.453-.127.288-.14.642-.188 1.01-.027.007-.014 0-.027.014-.214-.052-.287-.274-.367-.46-.2-.475-.233-1.238-.06-1.785.047-.14.247-.582.167-.716-.042-.127-.174-.2-.247-.303a2.478 2.478 0 01-.24-.427c-.16-.374-.24-.788-.414-1.162-.08-.173-.22-.354-.334-.513-.127-.18-.267-.307-.368-.52-.033-.073-.08-.194-.027-.274.014-.054.042-.075.094-.09.088-.072.335.022.422.062.247.1.455.194.662.334.094.066.195.193.315.226h.14c.214.047.455.014.655.073.355.114.675.28.962.46a5.953 5.953 0 012.085 2.286c.08.154.115.295.188.455.14.33.313.663.455.982.14.315.275.636.476.897.1.14.502.213.682.286.133.06.34.115.46.188.23.14.454.3.67.454.11.076.443.243.463.378z"/></svg>',
    oracle: '<svg viewBox="0 0 24 24"><path d="M16.412 4.412h-8.82a7.588 7.588 0 0 0-.008 15.176h8.828a7.588 7.588 0 0 0 0-15.176zm-.193 12.502H7.786a4.915 4.915 0 0 1 0-9.828h8.433a4.914 4.914 0 1 1 0 9.828z"/></svg>',
    mssql: '<svg viewBox="0 0 24 24"><path d="M4.105 4.105S9.158 1.58 11.684.316a3.079 3.079 0 0 1 1.481-.315c.766.047 1.677.788 1.677.788L24 9.948v9.789h-4.263V24H.002v-8.556C.002 13.337-.074 9.2 4.105 4.105zm4.334 10.369l2.06 3.293 4.078-5.797-6.138 2.504zm10.413 5.315V12.32l-7.832 3.2 3.2 5.128h4.226c.146-.022.406-.22.406-.86zM4 17.717c0 .206.024.342.065.443.4.973 1.063 1.84 1.063 1.84h8.236l-3.278-5.238c-1.506.388-4.3 1.862-5.564 2.606-.224.132-.469.27-.522.349z"/></svg>',
    postgresql: '<svg viewBox="0 0 24 24"><path d="M23.5594 14.7228a.5269.5269 0 0 0-.0563-.1191c-.139-.2632-.4768-.3418-1.0074-.2321-1.6533.3411-2.2935.1312-2.5256-.0191 1.342-2.0482 2.445-4.522 3.0411-6.8297.2714-1.0507.7982-3.5237.1222-4.7316a1.5641 1.5641 0 0 0-.1509-.235C21.6931.9086 19.8007.0248 17.5099.0005c-1.4947-.0158-2.7705.3461-3.1161.4794a9.449 9.449 0 0 0-.5159-.0816 8.044 8.044 0 0 0-1.3114-.1278c-1.1822-.0184-2.2038.2642-3.0498.8406-.8573-.3211-4.7888-1.645-7.2219.0788C.9359 2.1526.3086 3.8733.4302 6.3165c.0377.7562.2798 2.2445.6821 3.9127.4012 1.6652.888 3.1399 1.3734 4.1561.4866 1.0185.9311 1.6228 1.3857 1.8376.2401.1133.5608.1763.9501.1763.5368 0 1.1986-.1253 1.9739-.3748.2464-.0793.4929-.1585.7094-.2338.0162.0349.0324.0699.0486.0999.0979.1859.2618.4267.4357.6088-.1167.0295-.2334.0591-.3501.0886-1.7496.4428-3.3412.8449-3.4292 1.9173-.0297.3631.0674.7286.2921 1.0869.8282 1.321 3.2039 2.0768 6.3118 2.0105.2086-.0044.4173-.0132.6268-.026l-.0024.0013c1.2866-.0469 2.5959-.4747 3.7461-1.188.09-.0558.2356-.0514.3727-.0465l.0134.0005c.0578.0023.1156.0044.1735.0053 1.0652.0159 1.9352-.1362 2.5878-.4519.5765-.2788 1.0133-.6786 1.3139-1.0873a1.8573 1.8573 0 0 0 .2866-.4015c.0315-.0594.0529-.1015.0659-.1267l.0099-.0193c.1914-.3564.3588-.6689.4891-.9497a.3726.3726 0 0 0 .0317-.1067.55.55 0 0 0-.0017-.1364c.0178-.0445.0344-.0858.0502-.1254.1488-.3717.2461-.6171.2819-.6684.5765-.8259 1.0504-1.3739 1.4227-1.6464a.5634.5634 0 0 0 .212-.5765z"/></svg>',
    mariadb: '<svg viewBox="0 0 24 24"><path d="M23.157 4.412c-.676.284-.79.31-1.673.372-.65.046-1.14-.046-1.53-.155-.257-.073-.43-.137-.544-.137-.1 0-.227.047-.253.247-.027.205.108.4.108.4s.236.373.257.446c.016.055.05.235-.024.382-.257.506-1.2 1.126-1.876 1.483-.664.35-1.88.76-2.3.823-.372.057-1.01.083-1.473.052-.64-.042-1.074-.156-1.22-.195a6.628 6.628 0 0 1-.323-.103c-.166-.058-.368-.16-.424-.18-.12-.043-.246-.154-.3-.35-.06-.22.04-.425.09-.567.036-.105.152-.35.152-.35s-.052-.046-.16-.07c-.107-.02-.237.07-.344.22-.125.177-.302.503-.354.765-.066.34-.05.543.064.825.105.26.287.445.287.445s-.093.18-.148.33c-.055.145-.08.348-.045.55.054.327.2.525.287.62.087.097.186.177.186.177s-.073.106-.1.188c-.05.12-.067.245-.018.435.047.18.155.322.336.388.15.056.358.06.584.053.34-.012.613-.05.705-.06.093-.01.307-.044.524-.084.152-.028.34-.08.586-.193.303-.14.526-.336.697-.57.163-.227.274-.5.306-.772.013-.112.014-.216.01-.31a.737.737 0 0 0-.022-.143c-.005-.023-.017-.054-.017-.054s.17-.035.297-.082c.17-.06.384-.156.56-.31.19-.17.328-.4.385-.636.035-.148.04-.305.023-.453-.02-.188-.065-.33-.08-.38-.017-.052-.06-.137-.06-.137s.33-.166.473-.256c.228-.144.577-.402.897-.748.236-.256.526-.67.744-1.155.122-.27.288-.65.398-1.115.073-.306.124-.673.145-1.07 0 0-.13.074-.31.202a3.15 3.15 0 0 0-.542.49c-.09.102-.16.2-.28.422-.125.23-.232.472-.293.615-.2.464-.53 1.175-.97 1.596-.193.186-.343.266-.56.31-.19.038-.374.037-.517 0 0 0 .017-.112.02-.215.006-.147-.01-.254-.04-.365-.035-.137-.09-.245-.09-.245s.09-.012.178-.078a.758.758 0 0 0 .178-.211c.07-.122.115-.297.095-.438-.032-.21-.14-.312-.26-.373-.126-.065-.27-.088-.338-.094a1.48 1.48 0 0 0-.393.012c-.275.044-.505.14-.668.21-.163.073-.277.137-.277.137s-.036-.082-.085-.157a.8.8 0 0 0-.172-.178c-.13-.098-.3-.136-.447-.12-.262.03-.414.234-.466.412-.05.17-.033.327-.015.418.026.13.072.213.072.213s-.112.04-.244.11c-.202.108-.453.284-.614.577-.11.2-.166.433-.16.666.003.158.035.303.102.448.122.266.32.446.54.555.182.09.382.14.567.156a1.37 1.37 0 0 0 .435-.015c.265-.053.488-.17.646-.285.163-.118.286-.244.353-.323.073-.088.12-.158.12-.158l.1.09c.065.052.188.136.347.207.19.084.42.152.668.178.22.023.454.01.67-.032.3-.06.54-.163.713-.266.22-.13.36-.264.444-.35.055-.053.084-.1.107-.134a.82.82 0 0 0 .057-.09s.055.016.125.032c.085.02.198.04.326.048.238.015.54-.003.834-.086.236-.066.47-.17.656-.288 0 0-.015.124-.002.27.014.152.055.325.163.5.13.21.31.345.492.418.12.047.237.068.345.074.108.007.207-.002.288-.012a.818.818 0 0 0 .15-.03c.1-.03.164-.066.183-.078l.02-.017.018-.014s-.004.19.022.41c.028.23.088.5.228.77.147.28.358.536.63.72.28.19.603.286.898.29a1.3 1.3 0 0 0 .3-.027c.272-.063.48-.21.618-.36a1.18 1.18 0 0 0 .267-.483c.048-.163.058-.31.058-.41 0-.16-.024-.26-.024-.26s.08.005.2-.005c.115-.01.27-.035.438-.098a1.5 1.5 0 0 0 .568-.372c.2-.215.35-.51.403-.823.037-.222.032-.454-.014-.675-.04-.193-.116-.388-.213-.538-.042-.066-.09-.122-.132-.173-.074-.087-.14-.143-.14-.143s.165-.006.4-.08a2.22 2.22 0 0 0 .654-.308c.278-.19.573-.5.768-.893.146-.295.24-.645.216-.998-.014-.2-.064-.402-.142-.573a1.26 1.26 0 0 0-.32-.422c-.072-.063-.153-.12-.22-.157-.066-.038-.138-.07-.186-.088a1.04 1.04 0 0 0-.192-.056 1.273 1.273 0 0 0-.305-.02c-.198.005-.38.054-.52.11-.215.085-.36.192-.44.26-.056.05-.103.1-.15.16z"/></svg>',
    apache: '<svg viewBox="0 0 24 24"><path d="M17.805 2.197v.066h.156v.44h.072v-.44h.156v-.066zm.9 0l-.175.353-.172-.353h-.087v.506h.067V2.3l.172.35h.045l.172-.35v.404h.066v-.506zm-4.257 1c-.204.31-.424.66-.66 1.06l-.04.062a44.457 44.457 0 00-1.265 2.29c-.187.36-.38.742-.577 1.146l2.267-.25c.66-.302.955-.578 1.242-.976a15.5 15.5 0 00.23-.342c.23-.363.46-.763.663-1.16.197-.386.37-.767.505-1.11.083-.22.15-.422.198-.6.042-.158.074-.307.1-.45-.884.15-1.965.295-2.668.33z"/></svg>',
    nginx: '<svg viewBox="0 0 24 24"><path d="M12 0L1.605 6v12L12 24l10.395-6V6L12 0zm6 16.59c0 .705-.646 1.29-1.529 1.29-.631 0-1.351-.255-1.801-.81l-6-7.141v6.66c0 .721-.57 1.29-1.274 1.29H7.32c-.721 0-1.29-.6-1.29-1.29V7.41c0-.705.63-1.29 1.5-1.29.646 0 1.38.255 1.83.81l5.97 7.141V7.41c0-.721.6-1.29 1.29-1.29h.075c.72 0 1.29.6 1.29 1.29v9.18H18z"/></svg>',
    tomcat: '<svg viewBox="0 0 24 24"><path d="M12.66 3.494c-.377.637-.544 2.114-.502 3.162l-.005.004c.036.946.165 1.816.372 2.615-3.096.767-6.466 2.795-8.352 4.754-.882-1.19-1.232-2.168-1.336-2.908-.131-.936.092-1.794.646-2.482.867-1.077 2.098-1.153 3.365-.94-.025.2.001.391.081.51.335.494 2.135.668 3.21.189-.793-1.112-2.4-1.654-2.844-1.437a.762.762 0 00-.335.359c-.438-.078-.873-.137-1.19-.134-1.117.008-1.971.398-2.61 1.193-.628.78-.882 1.747-.734 2.8.14.996.633 2.055 1.46 3.154-.138.147-.27.293-.398.436C1.473 17.023 0 19.44 0 19.842v.207h2.658l-.046-.246c-.15-.793.15-1.785.763-2.526.386-.465 1.024-.996 2.027-1.241.891.87 2.027 1.794 3.291 2.685h1.976v-.208a.678.678 0 00-.327-.577c-.312-.204-.794-.232-1.237-.081-.421-.47-.658-1.098-.709-1.877 4.287.38 8.388 2.11 13.015 4.528h2.546l.033-.167c.048-.237-.082-.556-.346-.851-.456-.51-1.349-.752-2.095-.734-.514-.612-3.342-3.591-3.507-3.765a9.626 9.626 0 002.673-2.847h1.388v-.298H20.89a9.81 9.81 0 00.223-.419h.989v-.299h-.845c.628-1.359.975-2.918.942-4.625l.003.002c-.002-.468-.147-2.445-.415-2.989-.726.276-2.047 1.17-2.346 2.084a14.557 14.557 0 00-4.463.056c-.237-.984-1.423-1.736-2.318-2.16z"/></svg>',
    iis: '<svg viewBox="0 0 24 24"><path d="M0 3.7v16.6h24V3.7H0zm22.4 15H1.6V5.3h20.8v13.4zM3 7.3h1.6v9.4H3V7.3zm3.2 0h1.6v9.4H6.2V7.3zm3.2 0H11v9.4H9.4V7.3zm3.2 0h4.8c1.3 0 2.4 1 2.4 2.3v4.8c0 1.3-1 2.3-2.4 2.3h-4.8V7.3zm1.6 1.6v6.2h3.2c.4 0 .8-.4.8-.8V9.7c0-.4-.4-.8-.8-.8h-3.2z"/></svg>',
    jeus: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="2"/><path d="M12 6v12M6 12h12"/></svg>',
    webtob: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',
    jboss: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>',
    weblogic: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 9h6v6H9z"/></svg>',
    tibero: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><ellipse cx="12" cy="6" rx="8" ry="3"/><path d="M4 6v6c0 1.66 3.58 3 8 3s8-1.34 8-3V6"/><path d="M4 12v6c0 1.66 3.58 3 8 3s8-1.34 8-3v-6"/></svg>',
    mongodb: '<svg viewBox="0 0 24 24"><path d="M17.193 9.555c-1.264-5.58-4.252-7.414-4.573-8.115-.28-.394-.53-.954-.735-1.44-.036.495-.055.685-.523 1.184-.723.566-4.438 3.682-4.74 10.02-.282 5.912 4.27 9.435 4.888 9.884l.07.05A73.49 73.49 0 0111.91 24h.481c.114-1.032.284-2.056.51-3.07.417-.296.604-.463.85-.693a11.342 11.342 0 003.639-8.464c.01-.814-.103-1.662-.197-2.218zm-5.336 8.195s0-8.291.275-8.29c.213 0 .49 10.695.49 10.695-.381-.045-.765-1.76-.765-2.405z"/></svg>',
    redis: '<svg viewBox="0 0 24 24"><path d="M10.5 2.661l.54.997-1.797.644 2.409.218.748 1.246.467-1.122 2.077-.208-1.61-.613.426-1.014-1.578.519zm6.905 2.077L13.76 6.182l3.292 1.298.353 3.324-2.12-1.647-3.156 1.172 2.592-2.678L12.78 5.07l2.992-.058zM2.528 7.58c2.196-.194 4.39-.09 6.588-.09l3.278.09c.14.05.286.09.427.145a.652.652 0 01-.194.08c-.9.194-1.798.388-2.697.587L5.97 9.195l5.066.428c.12.08.23.173.34.264-1.35.59-2.69 1.195-4.052 1.761-1.46.604-2.93 1.193-4.408 1.762l.004-.3c.005-1.67.009-3.34.02-5.008a.566.566 0 01-.013-.173l-.012-.149a.592.592 0 01.014-.2zm18.53 3.99l.002 4.563c-.003.09-.007.178-.013.267l-.02.208c-.02.135-.05.267-.09.398l-.037.073-.086.143-.106.147-.126.148c-.162.167-.336.323-.52.467-.493.358-1.025.663-1.578.918-1.4.648-2.86 1.163-4.34 1.62-1.48.459-2.977.866-4.488 1.22-.296.063-.59.132-.889.18a.56.56 0 01-.303-.015c-.357-.092-.71-.203-1.058-.32a45.94 45.94 0 01-1.726-.588c-.562-.204-1.115-.432-1.664-.663a18.04 18.04 0 01-1.596-.768c-.478-.266-.926-.58-1.32-.96-.1-.1-.19-.204-.27-.317l-.075-.11a1.33 1.33 0 01-.068-.12 1.36 1.36 0 01-.1-.242l-.014-.146c.002-.067.01-.135.024-.2l.004-4.613c.017.124.05.245.098.361a1.75 1.75 0 00.146.262l.075.11c.08.113.17.217.27.317.394.38.842.694 1.32.96.497.274 1.02.52 1.56.738.557.224 1.123.435 1.698.626.575.191 1.156.374 1.742.54.45.126.904.24 1.36.346.076.018.153.03.232.035a.73.73 0 00.235-.03c.3-.052.598-.127.892-.196 1.514-.363 3.014-.778 4.498-1.245 1.48-.465 2.94-.984 4.335-1.638a11.45 11.45 0 001.546-.9c.177-.138.346-.287.504-.448l.126-.148c.033-.042.064-.087.093-.133l.044-.078.032-.063.02-.063z"/></svg>',
    solaris: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>',
    hpux: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="2"/><text x="12" y="16" font-size="10" text-anchor="middle" fill="currentColor" stroke="none">HP</text></svg>',
    aix: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="2"/><text x="12" y="16" font-size="9" text-anchor="middle" fill="currentColor" stroke="none">AIX</text></svg>',
    linux: '<svg viewBox="0 0 24 24"><path d="M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 00-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 00-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139z"/></svg>',
    ubuntu: '<svg viewBox="0 0 24 24"><path d="M17.61.455a3.41 3.41 0 0 0-3.41 3.41 3.41 3.41 0 0 0 3.41 3.41 3.41 3.41 0 0 0 3.41-3.41 3.41 3.41 0 0 0-3.41-3.41zM12.92.8C8.923.777 5.137 2.941 3.148 6.451a4.5 4.5 0 0 1 .26-.007 4.92 4.92 0 0 1 2.585.737A8.316 8.316 0 0 1 12.688 3.6 4.944 4.944 0 0 1 13.723.834 11.008 11.008 0 0 0 12.92.8zm9.226 4.994a4.915 4.915 0 0 1-1.918 2.246 8.36 8.36 0 0 1-.273 8.303 4.89 4.89 0 0 1 1.632 2.54 11.156 11.156 0 0 0 .559-13.089zM3.41 7.932A3.41 3.41 0 0 0 0 11.342a3.41 3.41 0 0 0 3.41 3.409 3.41 3.41 0 0 0 3.41-3.41 3.41 3.41 0 0 0-3.41-3.41zm2.027 7.866a4.908 4.908 0 0 1-2.915.358 11.1 11.1 0 0 0 7.991 6.698 11.234 11.234 0 0 0 2.422.249 4.879 4.879 0 0 1-.999-2.85 8.484 8.484 0 0 1-.836-.136 8.304 8.304 0 0 1-5.663-4.32zm11.405.928a3.41 3.41 0 0 0-3.41 3.41 3.41 3.41 0 0 0 3.41 3.41 3.41 3.41 0 0 0 3.41-3.41 3.41 3.41 0 0 0-3.41-3.41z"/></svg>',
    windows: '<svg viewBox="0 0 24 24"><path d="M0 3.449L9.75 2.1v9.451H0m10.949-9.602L24 0v11.4H10.949M0 12.6h9.75v9.451L0 20.699M10.949 12.6H24V24l-12.9-1.801"/></svg>'
};

// 카테고리 표시 순서 (OS -> DBMS -> WEB/WAS -> PC)
const CATEGORY_ORDER = ['OS', 'DBMS', 'WEB/WAS', 'PC'];

// DOM
const els = {
    version: document.getElementById('current-version'),
    date: document.getElementById('release-date'),
    container: document.getElementById('scripts-container'),
    historySection: document.getElementById('history-section'),
    historyList: document.getElementById('history-list')
};

// Init
document.addEventListener('DOMContentLoaded', loadReleases);

// Load releases from static JSON
async function loadReleases() {
    try {
        const res = await fetch(CONFIG.releasesUrl);
        if (!res.ok) {
            console.error('Fetch Error:', res.status, res.statusText);
            throw new Error(`릴리즈를 불러올 수 없습니다 (${res.status})`);
        }

        const data = await res.json();

        if (!data.latest) {
            els.container.innerHTML = '<div class="empty">릴리즈가 없습니다</div>';
            return;
        }

        renderRelease(data.latest);

        if (data.history && data.history.length > 0) {
            renderHistory(data.history);
        } else {
            els.historySection.style.display = 'none';
        }

    } catch (err) {
        els.container.innerHTML = `<div class="error">${err.message}</div>`;
    }
}

// Render release (simplified - data is pre-categorized)
function renderRelease(release) {
    els.version.textContent = release.version;
    els.date.textContent = release.date;

    const categories = release.categories;
    if (!categories || Object.keys(categories).length === 0) {
        els.container.innerHTML = '<div class="empty">배포된 파일이 없습니다</div>';
        return;
    }

    // Changelog 렌더링
    renderChangelog(release.changelog);

    // 파일 개수 업데이트
    let totalFiles = 0;
    for (const files of Object.values(categories)) {
        totalFiles += files.length;
    }
    const countEl = document.getElementById('file-count');
    const containerEl = document.getElementById('file-count-container');
    if (countEl && containerEl) {
        countEl.textContent = totalFiles + '개 파일';
        containerEl.style.display = 'flex';
    }

    // changelog를 맵으로 변환 (빠른 조회용)
    const changelogMap = {};
    if (release.changelog) {
        release.changelog.forEach(c => {
            changelogMap[c.name] = c.type;
        });
    }

    // 렌더링 (순서대로)
    let html = '';
    for (const catName of CATEGORY_ORDER) {
        const files = categories[catName];
        if (!files || files.length === 0) continue;

        const catInfo = CATEGORY_ICONS[catName] || { cssClass: 'etc', icon: '' };

        html += `
            <div class="category">
                <div class="category-header">
                    <span class="icon ${catInfo.cssClass}">${catInfo.icon}</span>
                    <span>${catName}</span>
                    <span class="count">${files.length}개</span>
                </div>
                <table class="file-table">
                    <thead>
                        <tr>
                            <th class="th-name">파일명</th>
                            <th class="th-status">상태</th>
                            <th class="th-date">수정일</th>
                            <th class="th-hash">Hash</th>
                            <th class="th-os">OS</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${files.map(f => {
                            const iconClass = f.brand || 'default';
                            const iconSvg = BRAND_ICONS[f.brand] || '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>';

                            // 배지 생성
                            const changeType = changelogMap[f.name];
                            const badgeHtml = changeType
                                ? `<span class="file-badge ${changeType}">${changeType === 'new' ? 'NEW' : 'UPDATED'}</span>`
                                : '<span class="file-badge none">-</span>';

                            // 해시 (앞 8자리만 표시)
                            const shortHash = f.hash ? f.hash.substring(0, 8) : '-';

                            return `
                            <tr class="file-row" onclick="window.open('${f.url}', '_blank')">
                                <td class="td-name">
                                    <span class="file-icon ${iconClass}">${iconSvg}</span>
                                    <span class="file-name">${f.name}</span>
                                </td>
                                <td class="td-status">${badgeHtml}</td>
                                <td class="td-date">${f.modifiedDate || '-'}</td>
                                <td class="td-hash"><code title="${f.hash || ''}">${shortHash}</code></td>
                                <td class="td-os"><span class="os-tag ${f.os.toLowerCase()}">${f.os}</span></td>
                            </tr>
                        `}).join('')}
                    </tbody>
                </table>
            </div>
        `;
    }

    els.container.innerHTML = html;
}

// Render changelog section
function renderChangelog(changelog) {
    const section = document.getElementById('changelog-section');
    if (!section) return;

    if (!changelog || changelog.length === 0) {
        section.style.display = 'none';
        return;
    }

    section.innerHTML = `
        <div class="changelog-header">이번 릴리즈 변경 사항</div>
        <div class="changelog-list">
            ${changelog.map(c => `
                <div class="changelog-item ${c.type}">
                    <span class="changelog-badge">${c.type === 'new' ? 'NEW' : 'UPDATED'}</span>
                    <span class="changelog-name">${c.name}</span>
                </div>
            `).join('')}
        </div>
    `;
    section.style.display = 'block';
}

// Render history
function renderHistory(history) {
    els.historyList.innerHTML = history.map(r => `
        <div class="history-item">
            <span class="history-version">${r.version}</span>
            <span class="history-date">${r.date}</span>
            <span class="history-count">${r.fileCount}개 파일</span>
            <a href="${r.url}" target="_blank" class="history-link">GitHub</a>
        </div>
    `).join('');
}
